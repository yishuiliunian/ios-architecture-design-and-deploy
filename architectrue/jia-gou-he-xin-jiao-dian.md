# 架构核心焦点

之前我们说”结构“这个事情，可以从最底层的变量命名，一路到最上面的工程结构。而一般情况下我们只需要关注到组件往上的结构就可以了。而对于客户端宏观架构而言，只需要关注到两个核心结构：

* 组件结构
* 模块结构

以及基于这两个结构构建出来的研发流程。组件结构决定了物理结构，模块结构决定了运行结构。一静一动，可以把在整个工程域中的关键结构和关键流程控制住。而通过控制和治理这两个关键结构，可以将复杂度置于受控的状态下，不至于失控。同时，行有余力可以照顾一下页面架构。

为什么说架构的核心焦点在于结构呢。我们从[系统论](https://baike.baidu.com/item/%E7%B3%BB%E7%BB%9F%E8%AE%BA/1133820)的角度出发：一个系统核心的东西有三个，要素、关系、功能。要素通过关系组成了系统，然后呈现出一定的功能。例如木头是要素，然后木头与木头之间的通过耦合关系然后组成了一艘船，于是就呈现出了其功能：可以在水上漂。类似的，我们在讨论整个客户端架构的时候，也需要思考什么是客户端架构里面的要素，而要素与要素之间的关系又是什么，最后我们需要呈现出来什么样的功能。于是，就引申出了上面的两个核心要素组件与模块和他们之间的结构关系。

但是，正如我们日常见到的系统，几乎没有什么是简单的。基本上都是复杂系统，如果我们单单领出来静态结构来谈。也会发现，其实要素除了核心的组件之外，还有很多其他的比如工程、人等等。这些其他要素也是需要被定义的。而定义好了，之后他们之间也会产生各种各样的关系。所以进行架构活动的核心焦点就是：

* 定义清晰要素
* 定义清晰要素之间的关系

例如我们把“人”这个要素引入到组件结构里面之后，我们可以做一个简单的事情，就是进行权限划分，去设计规则：只有XX组织的同学才可以去修改XX组件或者XX组件可以被所有同学修改。

### 结构约束

如果我们是做建筑的，比较好理解，不同类型的建筑结构所能承受的负载是不同的。比如下面两幅图，一个是砖架构，一个是钢筋混凝土结构。两个有比较明显的区别：

* 使用的要素不一样，一个核心要素是红砖，另外一个是钢筋和混凝土
* 结构关系不一样，一个是砖叠加，一个是钢筋骨架
* 最后的功能有比较大的区别，一个大概盖个两层就无法突破了，一个设计好了可以盖个几百层。

![砖结构](<../.gitbook/assets/image (2).png>)

![钢筋混凝土结构](<../.gitbook/assets/image (1).png>)

举这个例子，是想说明同样都是盖房子，但是使用了不同的要素和结构那么最终呈现出来的功能是不一样的。同样的道理，同样是做工程，如果我们使用的要素和结构不一样，其最终呈现出来的功能是不一样的。

一个没有单体的工程十人以为维护，代码规模不上十万行是没有啥大问题的。但是当团队规模过50，而且代码规模过百万的时候，还在一个单体工程里面折腾，就会效率低下，甚至难以维护，于是就需要切换结构到组件结构。因为只有组件结构这种结构状态才能够支撑这样的规模，而单体结构无法支撑这样的规模。&#x20;
